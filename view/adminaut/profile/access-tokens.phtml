<section class="content-header">
    <h1>
        <?php echo $this->translate('Profile:'); ?>
        <small><?php echo $this->escapeHtml($this->user->getName()); ?></small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="<?php echo $this->url('adminaut/dashboard'); ?>"><?php echo $this->translate("Dashboard"); ?></a></li>
        <li><a href="<?php echo $this->url('adminaut/profile'); ?>"><?php echo $this->translate("Profile"); ?></a></li>
        <li class="active"><?php echo $this->translate("Access tokens"); ?></li>
    </ol>
</section>

<section class="content">
    <div class="nav-tabs-custom">
        <ul class="nav nav-tabs">
            <li><a href="<?php echo $this->url('adminaut/profile'); ?>"><?php echo $this->translate('Overview') ?></a></li>
            <li><a href="<?php echo $this->url('adminaut/profile/settings'); ?>"><?php echo $this->translate('Settings') ?></a></li>
            <li><a href="<?php echo $this->url('adminaut/profile/change-password'); ?>"><?php echo $this->translate('Change password') ?></a></li>
            <li><a href="<?php echo $this->url('adminaut/profile/logins'); ?>"><?php echo $this->translate('Logins') ?></a></li>
            <li class="active"><a href="<?php echo $this->url('adminaut/profile/access-tokens'); ?>"><?php echo $this->translate('Access tokens') ?></a></li>
        </ul>
        <div class="tab-content">
            <table class="table table-striped table-bordered table-hover" id="dataTable">
                <thead>
                <tr>
                    <th style="width: 16px">#</th>
                    <th><?php echo $this->translate('Hash') ?></th>
                    <th><?php echo $this->translate('Created') ?></th>
                    <th style="width: 40px"><?php echo $this->translate('Action') ?></th>
                </tr>
                </thead>
                <tbody>

                <?php /** @var \Adminaut\Entity\UserAccessTokenEntity $accessToken */ ?>
                <?php foreach ($this->accessTokens as $accessToken) { ?>
                    <tr>
                        <td><?php echo $accessToken->getId(); ?>.</td>
                        <td><?php echo $accessToken->getHash(); ?></td>
                        <td><?php echo $accessToken->getInserted()->format('Y-m-d H:i'); ?></td>
                        <td>
                            <a class="btn btn-xs btn-danger" href="<?php echo $this->url('adminaut/profile/access-tokens/delete', ['id' => $accessToken->getId()]); ?>">
                                <?php echo $this->translate('Delete') ?>
                            </a>
                        </td>
                    </tr>
                <?php } ?>
                </tbody>
            </table>
            <div class="text-center">
                <a class="btn btn-danger" href="<?php echo $this->url('adminaut/profile/access-tokens/delete-all'); ?>">
                    <?php echo $this->translate('Delete all') ?>
                </a>
            </div>
        </div>
    </div>
</section>

<script>
    (function ($) {
        $(document).ready(function () {
            $('#dataTable').DataTable({
                "order": [[0, "desc"]]
            });
        });
    })(jQuery);
</script>
